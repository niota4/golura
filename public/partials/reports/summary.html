<div class="report-summary-container report-container">
    <div class="golura-block grid-y report">
        <div class="cell shrink">
            <div class="report-summary-header-container report-header-container">
                <div class="grid-x grid-margin-x align-middle">
                    <div class="cell small-12 medium-shrink large-shrink">
                        <button 
                            class="back-button button warning white-text" 
                            type="button"
                            ng-click="$root.goBack()"
                        >
                            <i class="fal fa-circle-arrow-left"></i>
                            <span ng-if="!$root.UI.isMobile"> 
                                Back
                            </span>
                        </button>  
                    </div>
                    <div class="cell small-12 medium-auto large-auto">
                        <h3 ng-if="!$root.UI.isMobile">
                            <b>
                                {{report.name}}    
                            </b>
                        </h3>
                    </div>
                    <div 
                        class="cell small-12 medium-shrink large-shrink"
                        ng-class="{'text-right': $root.UI.isMobile}"
                    >
                        <button
                            class="spreadsheet-button button white-text"
                            type="button"
                            ng-class="{'success': UI.type == 'spreadsheet'}"
                            ng-click="UI.type = 'spreadsheet'"
                            ng-if="hasOptions('spreadsheet')"
                        >
                            <i class="fal fa-table-cells"></i> 
                            <span ng-if="!$root.UI.isMobile"> 
                                Table
                            </span>
                        </button>
                        <button
                            class="spreadsheet-button button white-text"
                            type="button"
                            ng-class="{'success': UI.type == 'summary'}"
                            ng-click="UI.type = 'summary'"
                            ng-if="hasOptions('summary')"
                        >
                            <i class="fal fa-file-chart-pie"></i>
                            <span ng-if="!$root.UI.isMobile"> 
                                Summary
                            </span>
                        </button>
                        <button
                            class="spreadsheet-button button white-text"
                            type="button"
                            ng-class="{'success': UI.type == 'dashboard'}"
                            ng-click="UI.type = 'dashboard'"
                            ng-if="hasOptions('dashboard')"
                        >
                            <i class="fal fa-grid"></i>
                            <span ng-if="!$root.UI.isMobile"> 
                                Charts
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="cell auto">
            <div class="report-summary-content" ng-show="UI.reportLoaded && report.data">
                <!-- Summary Cards -->
                <div class="summary-cards-container" ng-if="report.data.summary">
                    <h4>
                        <b>
                            Report Summary
                        </b>
                    </h4>
                    <div class="grid-x grid-margin-x small-up-1 medium-up-2 large-up-3">
                        <div class="cell" ng-repeat="(key, value) in report.data.summary track by key">
                            <div class="summary-card">
                                <div class="card-header">
                                    <h5>{{key | formatCamelCase}}</h5>
                                </div>
                                <div class="card-content">
                                    <div class="summary-value">{{value}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Simple Data Summary (for reports without summary object) -->
                <div class="simple-summary-container" ng-if="!report.data.summary && !report.data.note">
                    <h4>
                        <b>
                            Report Data
                        </b>
                    </h4>
                    <div class="grid-x grid-margin-x small-up-1 medium-up-2 large-up-3">
                        <div class="cell" ng-repeat="(key, value) in report.data track by key" ng-if="key !== 'spreadsheetData' && key !== 'headers' && key !== 'clients' && key !== 'monthlyRevenue' && key !== 'monthlyBreakdown'">
                            <div class="summary-card">
                                <div class="card-header">
                                    <h5>{{key | formatCamelCase}}</h5>
                                </div>
                                <div class="card-content">
                                    <div class="summary-value">{{value}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Counts -->
                <div class="data-counts-container" ng-if="report.data.spreadsheetData || report.data.clients || report.data.monthlyRevenue">
                    <h4>
                        <b>
                            Data Information
                        </b>
                    </h4>
                    <div class="grid-x grid-margin-x small-up-1 medium-up-3 large-up-4">
                        <div class="cell" ng-if="report.data.spreadsheetData">
                            <div class="summary-card">
                                <div class="card-header">
                                    <h5>Total Records</h5>
                                </div>
                                <div class="card-content">
                                    <div class="summary-value">{{report.data.spreadsheetData.length}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="cell" ng-if="report.data.headers">
                            <div class="summary-card">
                                <div class="card-header">
                                    <h5>Columns</h5>
                                </div>
                                <div class="card-content">
                                    <div class="summary-value">{{report.data.headers.length}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="cell" ng-if="report.data.clients">
                            <div class="summary-card">
                                <div class="card-header">
                                    <h5>Clients</h5>
                                </div>
                                <div class="card-content">
                                    <div class="summary-value">{{report.data.clients.length}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="cell" ng-if="report.data.monthlyRevenue">
                            <div class="summary-card">
                                <div class="card-header">
                                    <h5>Monthly Data Points</h5>
                                </div>
                                <div class="card-content">
                                    <div class="summary-value">{{report.data.monthlyRevenue.length}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notes for unimplemented reports -->
                <div class="summary-note-container text-center" ng-if="report.data.note">
                    <div class="note-icon">
                        <i class="fal fa-info-circle fa-3x text-primary"></i>
                    </div>
                    <h4>Implementation Note</h4>
                    <p>{{report.data.note}}</p>
                </div>
            </div>

            <!-- Loading State -->
            <div class="summary-loading" ng-if="!UI.reportLoaded">
                <div class="text-center">
                    <div class="loading-spinner">
                        <i class="fal fa-spinner fa-spin fa-2x"></i>
                    </div>
                    <p>Loading summary...</p>
                </div>
            </div>

            <!-- No Data State -->
            <div class="summary-no-data text-center" ng-if="UI.reportLoaded && !report.data">
                <div class="no-data-icon">
                    <i class="fal fa-file-chart-pie fa-3x text-muted"></i>
                </div>
                <h4>No Data Available</h4>
                <p>This report doesn't have data to display.</p>
            </div>
        </div>
    </div>
</div>