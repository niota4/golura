
<div class="work-order-preview-container view-container">
    <div class="work-order-preview view">
        <div format-clients client="workOrder.Client"></div>
        <div format-users user="workOrder.Creator"></div>
        <div format-users user="workOrder.AssignedUser"></div>
        <div format-users user="workOrder.Completer"></div>
        <div class="golura-block grid-x">
            <div class="golura-block cell small-12 medium-3 large-3">
                <div class="work-order-preview-tabs-container tabs-container">
                    <div class="work-order-preview-tabs tabs-list-container">
                        <div class="work-order-preview-date-container text-center">
                            <div class="work-order-preview-date">
                                <h3 ng-class="{'ssc': !UI.workOrderLoaded}">
                                    <div 
                                        class="ssc-line"
                                        ng-if="!UI.workOrderLoaded"
                                    ></div>
                                    <b>
                                        Cost
                                    </b>
                                </h3>
                                <h6>
                                    ${{workOrder.cost | number}}
                                </h6>
                                <h3>
                                    <b>
                                        Due Date
                                    </b>
                                </h3>
                                <h6>
                                    {{workOrder.dueDate | DateTimeFormat}}
                                </h6>
                                <h3>
                                    <b>
                                        Scheduled Date
                                    </b>
                                </h3>
                                <h6>
                                    {{workOrder.scheduledDate | DateTimeFormat}}
                                </h6>
                            </div>
                        </div>
                        <ul 
                            class="work-order-preview-tabs-list tabs-list tabs vertical" 
                            id="workOrderPreviewTabs"
                            data-responsive-accordion-tabs="tabs small-accordion large-tabs" 
                            data-deep-link="false"
                            data-tabs 
                        >
                            <li>
                                <a  
                                    class="work-order-preview-view-button button success white-text expanded"
                                    ng-href="work-orders/work-order/{{workOrder.id}}"
                                    ng-cloak
                                >
                                    <i class="fal fa-search"></i> View
                                </a>
                            </li>
                            <li>
                                <a  
                                    class="work-order-preview-edit-button button white-text expanded"
                                    ng-href="work-orders/work-order/{{workOrder.id}}/edit"
                                    ng-cloak
                                >
                                    <i class="fal fa-edit"></i> edit
                                </a>
                            </li>
                            <li>
                                <a  
                                    class="work-order-preview-edit-button button white-text expanded"
                                    ng-href="{{ workOrder.PurchaseOrders.length ? ('work-orders/work-order/' + workOrder.id + '?purchaseOrders=true') : '' }}" 
                                    ng-if="permissions.canView"
                                    ng-disabled="!workOrder.PurchaseOrders.length"
                                    ng-cloak
                                >
                                    <i class="fal fa-clipboard-list"></i>
                                    <span ng-if="!workOrder.PurchaseOrders.length">
                                        No 
                                    </span>
                                    Purchase Orders
                                    <span ng-if="!workOrder.PurchaseOrders.length">
                                        Connected
                                    </span>
                                </a>
                            </li>
                            <li class="work-order-preview-tabs-title tabs-title is-active">
                                <a  
                                    class="work-order-preview-tabs-title-link work-order-preview-tabs-details-link"
                                    data-tabs-target="details"
                                    ng-click="initWorkOrder(workOrder.id)"
                                    ng-cloak
                                >
                                    <i class="fal fa-info-circle"></i> Details
                                </a>
                            </li>
                            <li class="work-order-preview-tabs-title tabs-title">
                                <a  
                                    class="work-order-preview-tabs-title-link work-order-preview-tabs-details-link"
                                    data-tabs-target="assign"
                                    ng-click="initAssignWorkOrderToUserForm(workOrder)"
                                    ng-cloak
                                >
                                    <i class="fal fa-user-plus"></i> Assign to User
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="golura-block cell small-12 medium-auto large-auto">
                <div 
                    class="work-order-preview-tabs-content tabs-content" 
                    data-tabs-content="workOrderPreviewTabs"
                >
                    <div 
                        class="work-order-preview-tabs-panel tabs-panel is-active" 
                        id="details"
                    >
                        <div class="work-order-preview-details-container">
                            <div class="grid-x grid-margin-x align-middle">
                                <div class="cell small-12 medium-12 large-12">
                                    <div class="cell small-12 medium-12 large-12">
                                        <h1
                                            class="separator-left"
                                            ng-class="{'ssc': !UI.workOrderLoaded}">
                                            <div 
                                                class="ssc-square"
                                                ng-if="!UI.workOrderLoaded"
                                            ></div>
                                            <a 
                                                ng-href="work-orders/work-order/{{workOrder.id}}"
                                                ng-cloak
                                            >
                                                <b>
                                                    {{workOrder.title}}
                                                </b>
                                            </a>
                                        </h1>
                                    </div>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Title: 
                                        </b> 
                                        {{workOrder.title}}
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Work Order Number: 
                                        </b> 
                                        <a 
                                            ng-href="/work-orders/work-order/{{workOrder.id}}"
                                            ng-cloak
                                        >
                                            {{workOrder.workOrderNumber}}
                                        </a>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Assigned User:
                                        </b>
                                        <a
                                            ng-href="users/user/{{workOrder.assignedUserId}}"
                                            ng-cloak
                                        >
                                            {{workOrder.AssignedUser.fullName}}
                                        </a>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Priority: 
                                        </b> 
                                        <span ng-class="{'alert-text': workOrder.Priority.level == 'high'}">
                                            {{workOrder.Priority.level}}
                                        </span>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Due Date: 
                                        </b> 
                                        <span ng-if="workOrder.dueDate">
                                            {{workOrder.dueDate | DateTimeFormat}}
                                        </span>
                                        <span ng-if="!workOrder.dueDate">
                                            N/A
                                        </span>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Scheduled Date: 
                                        </b> 
                                        <span ng-if="workOrder.scheduledDate">
                                            {{workOrder.scheduledDate | DateTimeFormat}}
                                        </span>
                                        <span ng-if="!workOrder.scheduledDate">
                                            N/A
                                        </span>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Status: 
                                        </b> 
                                        {{workOrder.WorkOrderStatus.name}}
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Approval Status: 
                                        </b> 
                                        <span 
                                            class="success-text"
                                            ng-if="workOrder.WorkOrderStatus.name == 'approved'"
                                        >
                                            approved
                                        </span>
                                        <span 
                                            class="alert-text"
                                            ng-if="workOrder.WorkOrderStatus.name == 'not approved'"
                                        >
                                            not approved
                                        </span>
                                        <span ng-if="!workOrder.scheduledDate">
                                            N/A
                                        </span>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Estimate: 
                                        </b> 
                                        <a 
                                            class="text-capitalize"
                                            ng-href="/estimates/estimate/{{workOrder.Estimate.id}}"
                                            ng-if="workOrder.estimateId"
                                            ng-cloak
                                        >
                                            {{workOrder.Estimate.estimateNumber}}
                                        </a>
                                        <span ng-if="!workOrder.estimateId">
                                            Not connected to an Estimate
                                        </span>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Client: 
                                        </b> 
                                        <a 
                                            class="text-capitalize"
                                            ng-href="/clients/client/{{workOrder.Client.id}}"
                                            ng-if="workOrder.clientId"
                                            ng-cloak
                                        >
                                            <i class="fal fa-user"></i> 
                                            {{workOrder.Client.fullName}}
                                        </a>
                                        <span ng-if="!workOrder.clientId">
                                            Not connected to an Client
                                        </span>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Completed By: 
                                        </b> 
                                        <a 
                                            class="text-capitalize"
                                            ng-href="/users/user/{{workOrder.Creator.id}}"
                                            ng-if="workOrder.completedBy"
                                            ng-cloak
                                        >
                                            {{workOrder.Completer.fullName}}
                                        </a>
                                        <span ng-if="!workOrder.completedBy">
                                            Not completed
                                        </span>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Created By: 
                                        </b> 
                                        <a 
                                            class="text-capitalize"
                                            ng-href="/users/user/{{workOrder.Creator.id}}"
                                            ng-cloak
                                        >
                                            {{workOrder.Creator.fullName}}
                                        </a>
                                    </h6>
                                    <h6 ng-class="{'ssc': !UI.workOrderLoaded}">
                                        <div 
                                            class="ssc-line"
                                            ng-if="!UI.workOrderLoaded"
                                        ></div>
                                        <b>
                                            Description: 
                                        </b> 
                                        <p 
                                            ng-if="workOrder.details"
                                            ng-bind-html="workOrder.details"
                                        >
                                        </p>
                                        <p ng-if="!workOrder.details">
                                            <i>
                                                No details available
                                            </i>
                                        </p>
                                    </h6>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div 
                        class="work-order-preview-tabs-panel tabs-panel" 
                        id="assign"
                    >
                        <div ng-include="'dist/forms/work-orders/assign-user-to-work-order-form.html'"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>